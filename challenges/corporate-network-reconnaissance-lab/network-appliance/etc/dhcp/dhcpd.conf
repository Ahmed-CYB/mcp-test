# DHCP Server Configuration File
# Corporate Network Appliance DHCP Service

# Global parameters
default-lease-time 86400;
max-lease-time 172800;
authoritative;

# Use this to enble / disable dynamic dns updates globally.
ddns-update-style none;

# Domain and DNS configuration
option domain-name "corpnet.local";
option domain-name-servers 192.168.1.10, 8.8.8.8, 8.8.4.4;
option routers 192.168.1.1;
option broadcast-address 192.168.1.255;
option netbios-name-servers 192.168.1.10;
option netbios-node-type 8;

# Network Time Protocol servers
option ntp-servers 192.168.1.10, pool.ntp.org;

# Subnet declaration for main corporate network
subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.100 192.168.1.200;
  option routers 192.168.1.1;
  option subnet-mask 255.255.255.0;
  option broadcast-address 192.168.1.255;
  option domain-name-servers 192.168.1.10, 192.168.1.11;
  option domain-name "corpnet.local";
  option netbios-name-servers 192.168.1.10;
  default-lease-time 86400;
  max-lease-time 172800;
}

# Management VLAN subnet
subnet 10.10.10.0 netmask 255.255.255.0 {
  range 10.10.10.50 10.10.10.100;
  option routers 10.10.10.1;
  option subnet-mask 255.255.255.0;
  option broadcast-address 10.10.10.255;
  option domain-name-servers 192.168.1.10;
  option domain-name "mgmt.corpnet.local";
  default-lease-time 43200;
  max-lease-time 86400;
}

# Guest network subnet
subnet 172.16.100.0 netmask 255.255.255.0 {
  range 172.16.100.10 172.16.100.50;
  option routers 172.16.100.1;
  option subnet-mask 255.255.255.0;
  option broadcast-address 172.16.100.255;
  option domain-name-servers 8.8.8.8, 8.8.4.4;
  option domain-name "guest.local";
  default-lease-time 3600;
  max-lease-time 7200;
  deny unknown-clients;
}

# Static host reservations
host network-printer {
  hardware ethernet 00:11:22:33:44:55;
  fixed-address 192.168.1.50;
  option host-name "printer-hp-lobby";
}

host file-server {
  hardware ethernet aa:bb:cc:dd:ee:ff;
  fixed-address 192.168.1.20;
  option host-name "fileserver-main";
}

host backup-server {
  hardware ethernet 11:22:33:44:55:66;
  fixed-address 192.168.1.25;
  option host-name "backup-srv";
}

# Network appliance management interface
host mgmt-interface {
  hardware ethernet 00:0c:29:12:34:56;
  fixed-address 10.10.10.100;
  option host-name "netapp-mgmt";
}

# Security monitoring station
host security-mon {
  hardware ethernet 02:42:ac:11:00:02;
  fixed-address 192.168.1.15;
  option host-name "security-monitor";
}

# Network scanner workstation
host scanner-ws {
  hardware ethernet 08:00:27:ab:cd:ef;
  fixed-address 192.168.1.150;
  option host-name "scanner-workstation";
}

# Failover configuration (commented out for standalone mode)
# failover peer "dhcp-failover" {
#   primary;
#   address 192.168.1.10;
#   port 647;
#   peer address 192.168.1.11;
#   peer port 647;
#   max-response-delay 30;
#   max-unacked-updates 10;
#   load balance max seconds 3;
#   mclt 1800;
#   split 128;
# }

# Logging configuration
log-facility local7;

# Custom options for network appliance discovery
option space corpnet;
option corpnet.appliance-id code 1 = text;
option corpnet.mgmt-vlan code 2 = unsigned integer 16;
option corpnet.backup-server code 3 = ip-address;

# Vendor-specific options
vendor-option-space corpnet;
option corpnet.appliance-id "NETAPP-CORE-01";
option corpnet.mgmt-vlan 10;
option corpnet.backup-server 192.168.1.25;

# Include additional configuration files
include "/etc/dhcp/dhcpd.local.conf";

# OMAPI key for dynamic updates
key "omapi-key" {
  algorithm hmac-md5;
  secret "YourBase64EncodedSecretKeyHere==";
};

omapi-port 7911;
omapi-key "omapi-key";

# Classes for different device types
class "network-devices" {
  match if substring(option vendor-class-identifier, 0, 4) = "Cisco";
}

class "windows-clients" {
  match if substring(option vendor-class-identifier, 0, 8) = "MSFT 5.0";
}

class "linux-clients" {
  match if substring(option vendor-class-identifier, 0, 5) = "Linux";
}