FROM debian:bookworm-slim
RUN apt-get update && apt-get install -y vsftpd
COPY vsftpd.conf /etc/vsftpd.conf
RUN useradd -m ftpuser && echo 'ftpuser:ftpuser' | chpasswd
RUN mkdir -p /srv/ftp && echo 'CTF{ftp_anonymous_login_and_eternalblue_exploit_2024}' > /srv/ftp/flag.txt && chmod 644 /srv/ftp/flag.txt
EXPOSE 21
CMD ["vsftpd", "/etc/vsftpd.conf"]