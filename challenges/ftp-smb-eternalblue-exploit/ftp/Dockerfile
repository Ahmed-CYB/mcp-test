FROM debian:bookworm-slim
RUN apt-get update && apt-get install -y vsftpd && rm -rf /var/lib/apt/lists/*
COPY vsftpd.conf /etc/
RUN echo 'anonymous_enable=YES' >> /etc/vsftpd.conf
RUN useradd -m ftpuser && echo 'ftpuser:ftppassword' | chpasswd
COPY flag.txt /home/ftp/flag.txt
RUN chown ftpuser:ftpuser /home/ftp/flag.txt && chmod 644 /home/ftp/flag.txt
EXPOSE 21
CMD ["vsftpd", "/etc/vsftpd.conf"]