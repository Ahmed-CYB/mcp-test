# Using vsftpd server as a base image
FROM ubuntu:22.04

RUN apt-get update && apt-get install -y \
    vsftpd \
    && rm -rf /var/lib/apt/lists/*

COPY vsftpd.conf /etc/vsftpd.conf
COPY flag.txt /srv/ftp/flag.txt

# Set FTP root directory permissions
RUN chmod 755 /srv/ftp && chmod 644 /srv/ftp/flag.txt

# Create an anonymous FTP user
RUN mkdir -p /var/run/vsftpd/empty

EXPOSE 21

CMD ["/usr/sbin/vsftpd", "/etc/vsftpd.conf"]
